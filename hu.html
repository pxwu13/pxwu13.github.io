<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap v5.2-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <!--jQuery-->
    <script src="https://code.jquery.com/jquery-3.6.3.js"
        integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>

    <!-- CSS-->
    <style>
        .bg-orange {
            background-color: #fec952;
        }

        .bg-blue {
            background-color: #47b7e0;
        }

        .bg-red {
            background-color: #ff7473;
        }

        .bg-gray {
            background-color: gray;
        }

        .bg-white {
            background-color: white;
        }

        .font-weight-bold {
            font-weight: bold;
        }

        /* radio-1 */
        .radio-1 {
            display: none;
        }

        .radio-1-1:checked+label {
            background-color: #47b7e0;
            font-weight: bold;
        }

        .radio-1-1:not(:checked)+label {
            display: none;
        }

        .radio-1-2:checked+label {
            background-color: #ff7473;
            font-weight: bold;
        }

        .radio-1-2:not(:checked)+label {
            display: none;
        }

        /* radio-2 */
        .radio-2 {
            display: none;
        }

        .radio-2-1:checked+label {
            background-color: #fec952;
            font-weight: bold;
        }

        .radio-2-1:not(:checked)+label {
            background-color: #ffffff;
            font-weight: bold;
        }

        .radio-2-2:checked+label {
            background-color: #47b7e0;
            font-weight: bold;
        }

        .radio-2-2:not(:checked)+label {
            background-color: #ffffff;
            font-weight: bold;
        }

        /* radio-3 */
        .radio-3 {
            display: none;
        }

        .radio-3-1:checked+label {
            background-color: #fec952;
            font-weight: bold;
        }

        .radio-3-1:not(:checked)+label {
            display: none;
        }

        .radio-3-2:checked+label {
            background-color: #ff7473;
            font-weight: bold;
        }

        .radio-3-2:not(:checked)+label {
            display: none;
        }

        /* radio-2 */
        .radio-5 {
            display: none;
        }

        .radio-5:checked+label {
            background-color: gray;
            color: white;
        }

        .radio-5:not(:checked)+label {
            background-color: #ffffff;
            border: 0.0625rem solid gray;
        }

        .box {
            border-color: black;
            border-radius: 0.5rem;
            border-width: 0.125rem;
            border-style: solid;
        }

        .box-hearder {
            border-color: black;
            border-radius: 0.5rem 0.5rem 0 0;
            border-width: 0.125rem;
            border-style: solid;
        }

        .box-body {
            border-color: black;
            border-radius: 0 0 0.5rem 0.5rem;
            border-width: 0 0.125rem 0.125rem 0.125rem;
            border-style: solid;
        }

        .btn-comment {
            margin-right: 0.25rem;
            margin-bottom: 0.25rem;
            padding-top: 0;
            padding-bottom: 0;
        }

        .btn-back {
            border: 0.0625rem solid black;
            background-color: #47b7e0;
            color: #ffffff;
            font-weight: bold;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        .btn-back:hover {
            border: 0.0625rem solid black;
            background-color: #ff7473;
            color: #ffffff;
            font-weight: bold;
        }

        .btn-num {
            border: 0.0625rem solid black;
            background-color: white;
            font-weight: bold;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        .btn-num:hover {
            border: 0.0625rem solid black;
            background-color: white;
            color: gray;
            font-weight: bold;
        }

        .btn-submit {
            background-color: #ff7473;
            color: white;
            font-weight: bold;
        }
    </style>

    <!-- Title-->
    <title>2023記帳</title>
</head>

<body>
    <div class="container">
        <!-- Submit redirect-->
        <iframe name="iframe_redirect" id="iframe_redirect" style="display:none;"
            onload="if(typeof sent_redirect!='undefined'){window.location='index.html';}"></iframe>
        <!-- Form-->
        <form onsubmit="return doSubmit()" target="iframe_redirect"
            action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSdg8g9V9ypNBkhvMMH5LlQtrkW-91hVJZ_XoA8qhmyTib8luQ/formResponse"
            method="POST" class="px-3 pt-2">
            <!-- Divsion 1-->
            <div class="row mb-2">
                <!-- Who paid entry.44147002-->
                <div class="col-2 pe-3">
                    <div class="row box">
                        <input type="radio" name="entry.44147002" class="radio-1 radio-1-1" id="radio-1-1" value="咚"
                            autocomplete="off">
                        <label for="radio-1-1" class="btn col">咚</label>
                        <input type="radio" name="entry.44147002" class="radio-1 radio-1-2" id="radio-1-2" value="虎"
                            autocomplete="off" checked>
                        <label for="radio-1-2" class="btn col">虎</label>
                    </div>
                </div>
                <!-- Expense/Income entry.136984385-->
                <div class="col-8 px-3">
                    <div class="row box">
                        <input type="radio" name="entry.136984385" class="radio-2 radio-2-1" id="radio-2-1" value="支出"
                            checked />
                        <label for="radio-2-1" class="btn col-6">支出</label>
                        <input type="radio" name="entry.136984385" class="radio-2 radio-2-2" id="radio-2-2"
                            value="收入" />
                        <label for="radio-2-2" class="btn col-6">收入</label>
                    </div>
                </div>
                <!-- Family/Individual entry.339193861-->
                <div class="col-2 ps-3">
                    <div class="row box">
                        <input type="radio" name="entry.339193861" class="radio-3 radio-3-1" id="radio-3-1" value="家庭"
                            autocomplete="off" checked>
                        <label for="radio-3-1" class="btn col">家</label>
                        <input type="radio" name="entry.339193861" class="radio-3 radio-3-2" id="radio-3-2" value="個人"
                            autocomplete="off">
                        <label for="radio-3-2" class="btn col">個</label>
                    </div>
                </div>
            </div>

            <!-- Divsion 2 entry.962841591-->
            <div class="mb-2">
                <div class="row box">
                    <input type="radio" name="entry.962841591" class="radio-2 radio-2-1" name="radio-4" id="radio-4-1"
                        value="飲食" checked />
                    <label for="radio-4-1" class="btn col-4">飲食</label>
                    <input type="radio" name="entry.962841591" class="radio-2 radio-2-1" name="radio-4" id="radio-4-2"
                        value="衣飾" />
                    <label for="radio-4-2" class="btn col-4">衣飾</label>
                    <input type="radio" name="entry.962841591" class="radio-2 radio-2-1" name="radio-4" id="radio-4-3"
                        value="住行" />
                    <label for="radio-4-3" class="btn col-4">住行</label>
                    <input type="radio" name="entry.962841591" class="radio-2 radio-2-1" name="radio-4" id="radio-4-4"
                        value="育樂" />
                    <label for="radio-4-4" class="btn col-4">育樂</label>
                    <input type="radio" name="entry.962841591" class="radio-2 radio-2-1" name="radio-4" id="radio-4-5"
                        value="社交" />
                    <label for="radio-4-5" class="btn col-4">社交</label>
                    <input type="radio" name="entry.962841591" class="radio-2 radio-2-1" name="radio-4" id="radio-4-6"
                        value="其他" />
                    <label for="radio-4-6" class="btn col-4">其他</label>
                </div>
            </div>

            <!-- Divsion 3 entry.2034304089 entry.1550548858-->
            <div class="row box-hearder">
                <div class="input-group p-0">
                    <input type="text" name="entry.2034304089" class="form-control font-weight-bold"
                        placeholder="在此輸入備註" id="comment-input" />
                    <input type="date" name="entry.1550548858" class="form-control font-weight-bold" id="date" />
                </div>
            </div>
            <div class="row box-body mb-2 p-1 pb-0 comment-btns">
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-1" checked />
                <label for="radio-5-1" class="btn btn-sm col-auto btn-comment">早餐</label>
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-2" />
                <label for="radio-5-2" class="btn btn-sm col-auto btn-comment">午餐</label>
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-3" />
                <label for="radio-5-3" class="btn btn-sm col-auto btn-comment">晚餐</label>
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-4" />
                <label for="radio-5-4" class="btn btn-sm col-auto btn-comment">全聯</label>
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-5" />
                <label for="radio-5-5" class="btn btn-sm col-auto btn-comment">加油</label>
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-6" />
                <label for="radio-5-6" class="btn btn-sm col-auto btn-comment">薪資</label>
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-7" />
                <label for="radio-5-7" class="btn btn-sm col-auto btn-comment">獎金</label>
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-8" />
                <label for="radio-5-8" class="btn btn-sm col-auto btn-comment">Uber Eats</label>
                <input type="radio" class="radio-5" name="radio-5" id="radio-5-9" />
                <label for="radio-5-9" class="btn btn-sm col-auto btn-comment">熊貓</label>
            </div>

            <!-- Divsion 4 entry.2007259481-->
            <div class="row box-hearder">
                <div class="input-group p-0">
                    <span class="input-group-text font-weight-bold">$</span>
                    <input type="text" name="entry.2007259481" class="form-control font-weight-bold" placeholder="0"
                        id="num-input" value="0" hidden />
                    <label for="num-input" class="form-control" id="num-label">0</label>
                </div>
            </div>
            <div class="row box-body bg-orange mb-2">
                <div class="col-8 p-1 num-keyboard">
                    <div class="row m-0 justify-content-around mb-1">
                        <div class="btn btn-num col-3">7</div>
                        <div class="btn btn-num col-3">8</div>
                        <div class="btn btn-num col-3">9</div>
                    </div>
                    <div class="row m-0 justify-content-around mb-1">
                        <div class="btn btn-num col-3">4</div>
                        <div class="btn btn-num col-3">5</div>
                        <div class="btn btn-num col-3">6</div>
                    </div>
                    <div class="row m-0 justify-content-around mb-1">
                        <div class="btn btn-num col-3">1</div>
                        <div class="btn btn-num col-3">2</div>
                        <div class="btn btn-num col-3">3</div>
                    </div>
                    <div class="row m-0 justify-content-around">
                        <div class="btn btn-num col-7">0</div>
                        <div class="btn btn-back col-3 ">←</div>
                    </div>
                </div>
                <div class="col-4">
                </div>
            </div>

            <!-- Div test-->
            <div class="row mb-2">
                <input type="submit" class="btn btn-submit box col-3" value="OK" id="btn-submit" />
            </div>
        </form>

        <script>
            // Btn-submit
            var isSubmitted = false;
            function doSubmit() {
                if (!isSubmitted) {
                    isSubmitted = true;
                    sent_redirect = true;
                    return true;
                } else {
                    return false;
                }
            }

            // Num-keyboard
            const num_input = document.getElementById('num-input');
            const num_label = document.getElementById('num-label');

            function updateNumInput(digit) {
                if (num_input.value == 0) {
                    num_input.value = digit;
                } else {
                    num_input.value = num_input.value + digit;
                }
                num_label.innerText = parseInt(num_input.value, 10).toLocaleString();
            }

            function backNumInput() {
                num_input.value = num_input.value.substring(0, num_input.value.length - 1);
                if (num_input.value.length == 0) {
                    num_input.value = 0;
                }
                num_label.innerText = parseInt(num_input.value, 10).toLocaleString();
            }

            const num_keyboard = document.querySelector('.num-keyboard');
            num_keyboard.addEventListener('click', (event) => {
                const { target } = event;
                if (target.matches('.btn-num')) {
                    var digit = target.innerHTML;
                    console.log(digit);
                    updateNumInput(digit);
                } else if (target.matches('.btn-back')) {
                    backNumInput();
                }
            });

            // Set radio-1 listener
            const radio1s = document.querySelectorAll('.radio-1');
            radio1s[0].addEventListener('click', function () {
                radio1s[1].checked = true;
            });
            radio1s[1].addEventListener('click', function () {
                radio1s[0].checked = true;
            });

            // Set radio-3 listener
            const radio3s = document.querySelectorAll('.radio-3');
            radio3s[0].addEventListener('click', function () {
                radio3s[1].checked = true;
            });
            radio3s[1].addEventListener('click', function () {
                radio3s[0].checked = true;
            });

            // Div 3 comment & date            
            const comment_btns = document.querySelector('.comment-btns');
            const commnet_input = document.getElementById('comment-input');
            comment_btns.addEventListener('click', (event) => {
                const { target } = event;
                if (target.matches('.btn-comment')) {
                    console.log(target.innerHTML);
                    commnet_input.value = target.innerHTML;
                }
            });

            // Set default date = today
            document.getElementById('date').valueAsDate = new Date();
        </script>
    </div>
</body>

</html>
